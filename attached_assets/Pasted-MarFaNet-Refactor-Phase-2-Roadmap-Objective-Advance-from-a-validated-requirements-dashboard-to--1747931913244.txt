MarFaNet Refactor • Phase‑2+ Roadmap

Objective: Advance from a validated requirements dashboard to a release‑ready, continuously‑integrated codebase that any downstream developer can turn into a production APK with one command.

Milestone 2 — Core Functionality Completion

Goal: Functional parity with original app plus new Xray‑specific features.

Item

Tasks

Owner

Done‑When

gfw‑knocker embed

• Commit JNI stub & Kotlin wrapper• Verify default on‑startup• Add toggle in Settings → Advanced

Core

Unit test passes & README updated

Routing auto‑update

• Implement Worker + daily cron• SHA‑256 validation• Live reload hook (NativeBridge.reloadRules())

Network

Worker logs success 3 days in CI

Latency scanner UI

• Integrate Room DB for RTT• Sort nodes by latency• Add colour badges• 90 % unit‑test coverage

UI

UX demo & coverage report

WARP removal proof

• Diff view attached• Subscription parser test cases

Core

CI snapshot shows removed classes

Exit Criteria: All four items merged to develop, CI green.

Milestone 3 — Performance & Stability

Goal: Meet optimisation targets (#9–#11).

Benchmark harness – Script using adb shell am instrument & macrobenchmark to capture cold‑start, CPU, RAM, battery.

Connection stress‑test – 24 h loop connecting/disconnecting; watchdog logs ≤ 1 error.

Memory leak detection – Integrate LeakCanary in debug; zero retained objects >512 KB after 30 min.

Profiling report – Output before‑vs‑after metrics → PERF_REPORT.md.

Milestone 4 — CI/CD Pipeline

Stage

Action

CI

Matrix (arm64‑v8a,x86_64) × (lint, detekt, tests). Fail on warning >0.

Artifact Build

On tag v*, GitHub Actions downloads native libs artefact, runs ./gradlew assembleRelease, uploads APK + mapping.

Security Scan

Run OWASP Dependency‑Check; block on Critical/High CVEs.

CodeCov

Upload JaCoCo; require ≥ 80 % overall.

Docs Deploy

Publish CHANGELOG.md, Tech_Report.html to GitHub Pages.

Milestone 5 — Release Candidate (RC‑1)

Versioning – 1.0.0‑rc1, semantic‑version tags.

License Audit – SPDX report; ensure GPL compliance.

Beta Feedback – Distribute internal APK; collect crashlytics for 72 h.

Freeze – Lock dependencies with Gradle Version Catalog.

Milestone 6 — GA Launch

Merge develop → main, tag v1.0.0.

Publish source zip + release notes.

Handoff to downstream AS build or Play Console pipeline (future).

